<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'Copy',
      copy_success: 'Copied',
      copy_failure: 'Copy failed'
    },
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="愚非愚余">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;index.html">
<meta property="og:site_name" content="愚非愚余">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>愚非愚余</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">愚非愚余</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">愚非愚余的博客吖</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019/15641056083429/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/09/2019/15641056083429/" class="post-title-link" itemprop="url">ios 开发中 动态库 与静态库的区别</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-08-09 17:24:17 / Modified: 17:27:40" itemprop="dateCreated datePublished" datetime="2019-08-09T17:24:17+08:00">2019-08-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ios-开发中-动态库-与静态库的区别"><a href="#ios-开发中-动态库-与静态库的区别" class="headerlink" title="ios 开发中 动态库 与静态库的区别"></a>ios 开发中 动态库 与静态库的区别</h1><p>使用静态库的好处</p>
<ol>
<li>模块化，分工合作</li>
<li>避免少量改动经常导致大量的重复编译连接</li>
<li>也可以重用，注意不是共享使用</li>
</ol>
<p>动态库使用有如下好处：</p>
<ol>
<li>使用动态库，可以将最终可执行文件体积缩小</li>
<li>使用动态库，多个应用程序共享内存中得同一份库文件，节省资源</li>
<li>使用动态库，可以不重新编译连接可执行程序的前提下，更新动态库文件达到更新应用程序的目的。</li>
</ol>
<p>从1可以得出，将整个应用程序分模块，团队合作，进行分工，影响比较小。<br>等其他好处，<br>从2可以看出，其实动态库应该叫共享库，那么从这个意义上来说，苹果禁止iOS开发中使用动态库就可以理解了：</p>
<p>因为在现在的iPhone，iPodTouch，iPad上面程序都是单进程的，也就是某一时刻只有一个进程在运行，那么你写个共享库，</p>
<pre><code>----共享给谁？（你使用的时候只有你一个应用程序存在，其他的应该被挂起了，即便是可以同时多个进程运行，别人能使用你的共享库里的东西吗？你这个是给你自己的程序定制的。）
----目前苹果的AppStore不支持模块更新，无法更新某个单独文件(除非自己写一个更新机制：有自己的服务端放置最新动态库文件)</code></pre><p>至于苹果为啥禁止ios开发使用动态库我就猜到上面俩原因</p>
<p>深入理解iPhone静态库<br>    在实际的编程过程中，通常会把一些公用函数制成函数库，供其它程序使用，一则提搞了代码的复用；二则提搞了核心技术的保密程度。所以在实际的项目开发中，经常会使用到函数库，函数库分为静态库和动态库两种。和多数人所熟悉的动态语言和静态语言一样，这里的所谓静态和动态是相对编译期和运行期的：静态库在程序编译时会被链接到目标代码中，程序运行时将不再需要改静态库；而动态库在程序编译时并不会被链接到目标代码中，只是在程序运行时才被载入，因为在程序运行期间还需要动态库的存在。</p>
<p>　　iPhone官方只支持静态库联编。</p>
<p>深入理解framework（框架，其实相当于静态框架，不是动态库）</p>
<p>打包framework还是一个比较重要的功能，可以用来做一下事情：</p>
<p><em>（1）封装功能模块，比如有比较成熟的功能模块封装成一个包，然后以后自己或其他同事用起来比较方便。<br>（2）封装项目，有时候会遇到这个情况，就是一家公司找了两个开发公司做两个项目，然后要求他们的项目中的一个嵌套进另一个项目，此时也可以把呗嵌套的项目打包成framework放进去，这样比较方便。</em></p>
<p>我们为什么需要框架（Framework）？<br>要想用一种开发者友好的方式共享库是很麻烦的。你不仅仅需要包含库本身，还要加入所有的头文件，资源等等。</p>
<p>苹果解决这个问题的方式是框架（framework）。基本上，这是含有固定结构并包含了引用该库时所必需的所有东西的文件夹。不幸的是，iOS禁止所有的动态库。同时，苹果也从Xcode中移除了创建静态iOS框架的功能。</p>
<p>Xcode仍然可以支持创建框架的功能，重启这个功能，我们需要对Xcode做一些小小的改动。</p>
<p>把代码封装在静态框架是被app store所允许的。尽管形式不同，本质上它仍然是一种静态库。</p>
<p>框架（Framework）的类别</p>
<p>大部分框架都是动态链接库的形式。因为只有苹果才能在iOS设备上安装动态库，所以我们无法创建这种类型的框架。</p>
<p>静态链接库和动态库一样，只不过它是在编译时链接二进制代码，因此使用静态库不会有动态库那样的问题（即除了苹果谁也不能在iOS上使用动态库）。</p>
<p>“伪”框架是通过破解Xcode的目标Bundle（使用某些脚本）来实现的。它在表面上以及使用时跟静态框架并无区别。“伪”框架项目的功能几乎和真实的框架项目没有区别（不是全部）。</p>
<p>“嵌入”框架是静态框架的一个包装，以便Xcode能获取框架内的资源（图片、plist、nib等）。</p>
<p>本次发布包括了创建静态框架和“伪”框架的模板，以及二者的“嵌入”框架。</p>
<p>用哪一种模板？</p>
<p>本次发布有两个模板，每个模板都有“强”“弱”两个类别。你可以选择最适合一种（或者两种都安装上）。</p>
<p>最大的不同是Xcode不能创建“真”框架，除非你安装静态框架文件xcspec在Xcode中。这真是一个遗憾（这个文件是给项目使用的，而不是框架要用的）。</p>
<p>简单第</p>
<p>简单说，你可以这样决定用哪一种模板：</p>
<p>如果你不想修改Xcode，那么请使用“伪”框架版本</p>
<p>如果你只是想共享二进制（不是项目），两种都可以</p>
<p>如果你想把框架共享给不想修改Xcode的开发者，使用“伪”框架版本</p>
<p>如果你想把框架共享给修改过Xcode的开发者，使用“真”框架版本</p>
<p>如果你想把框架项目作为另一个项目的依赖（通过workspace或者子项目的方式），请使用“真”框架（或者“伪”框架，使用-framework——见后）</p>
<p>如果你想在你的框架项目中加入其他静态库／框架，并把它们也链接到最终结果以便不需要单独添加到用户项目中，使用“伪”框架</p>
<p>“伪”框架</p>
<p>“伪”框架是破解的“reloacatable object file”（可重定位格式的目标文件， 保存着代码和数据，适合于和其他的目标文件连接到一起，用来创建一个可执行目标文件或者是一个可共享目标文件），它可以让Xcode编译出类似框架的东西——其实也是一个bundle。</p>
<p>“伪框架”模板把整个过程分为几个步骤，用某些脚本去产生一个真正的静态框架（基于静态库而不是reloacatable object file）。而且，框架项目还是把它定义为wrapper.cfbundle类型，一种Xcode中的“二等公民”。</p>
<p>因此它跟“真”静态框架一样可以正常工作，但当存在依赖关系时就有麻烦了。</p>
<p>依赖问题</p>
<p>如果不使用依赖，只是创建普通的项目是没有任何问题的。但是如果使用了项目依赖（比如在workspace中），Xcode就悲剧了。当你点击“Link Binary With Libraries”下方的’+’按钮时，“伪框架”无法显示在列表中。你可以从你的“伪”框架项目的Products下面将它手动拖入，但当你编辑你的主项目时，会出现警告：</p>
<p>warning: skipping file ‘/somewhere/MyFramework.framework’ (unexpectedfile type ‘wrapper.cfbundle’ in Frameworks &amp; Libraries build phase)</p>
<p>并伴随“伪”框架中的链接错误。</p>
<p>幸运的是，有个办法来解决它。你可以在”Other Linker Flags”中用”-framwork”开关手动告诉linker去使用你的框架进行链接：</p>
<p>-framework MyFramework</p>
<p>警告仍然存在，但起码能正确链接了。</p>
<p>添加其他的库/框架</p>
<p>如果你加入其他静态（不是动态）库/框架到你的“伪”框架项目中，它们将“链接”进你最终的二进制框架文件中。在“真”框架项目中，它们是纯引用，而不是链接。</p>
<p>你可以在项目中仅仅包含头文件而不是静态库/框架本身的方式避免这种情况（以便编译通过）。</p>
<p>“真”框架</p>
<p>“真”框架各个方面都符合“真”的标准。它是真正的静态框架，正如使用苹果在从Xcode中去除的那个功能所创建的一样。</p>
<p>为了能创建真正的静态框架项目，你必需在Xcode中安装一个xcspec文件。</p>
<p>如果你发布一个“真”框架项目（而不是编译），希望去编译这个框架的人必需也安装xcspec文件（使用本次发布的安装脚本），以便Xcode能理解目标类型。</p>
<p>注意：如果你正在发布完全编译的框架，而不是框架项目，最终用户并不需要安装任何东西。</p>
<p>我已经提交一个报告给苹果，希望他们在Xcode中更新这个文件，但那需要一点时间.OpenRadarlink here</p>
<p>加其他静态库/框架</p>
<p>如果你加入其他静态（不是动态）库/框架到你的“真”框架项目，它们只会被引用，而不会象“伪”框架一样被链接到最终的二进制文件中。</p>
<p>从早期版本升级</p>
<p>如果你是从Mk6或者更早的版本升级，同时使用“真”静态框架，并且使用Xcode4.2.1以前的版本，请运行uninstall_legacy.sh以卸载早期用于Xcode的所有修正。然后再运行install.sh，重启Xcode。如果你使用Xcode4.3以后，只需要运行install.sh并重启Xcode。</p>
<p>安装</p>
<p>分别运行Real Framework目录或Fake Framework目录下的install.sh脚本进行安装（或者两个你都运行）。</p>
<p>重启Xcode，你将在新项目向导的Framework&amp;Library下看到StaticiOS Framework（或者Fake Static iOS Framework）。</p>
<p>卸载请运行unistall.sh脚本并重启Xcode。</p>
<p>创建一个iOS框架项目</p>
<p>创建新项目。</p>
<p>项目类型选择Framework&amp;Library下的Static iOS Framework（或者Fake Static iOS Framework）。</p>
<p>选择“包含单元测试”（可选的）。</p>
<p>在target中加入类、资源等。</p>
<p>凡是其他项目要使用的头文件，必需声明为public。进入target的Build Phases页，展开Copy Headers项，把需要public的头文件从Project或Private部分拖拽到Public部分。</p>
<p>编译你的 iOS 框架</p>
<p>选择指定target的scheme</p>
<p>修改scheme的Run配置（可选）。Run配置默认使用Debug，但在准备部署的时候你可能想使用Release。</p>
<p>编译框架（无论目标为iOS device和Simulator都会编译出相同的二进制，因此选谁都无所谓了）。</p>
<p>从Products下选中你的framework，“show in Finder”。</p>
<p>在build目录下有两个文件夹：(yourframework).framework and (your framework).embeddedframework.</p>
<p>如果你的框架只有代码，没有资源（比如图片、脚本、xib、coredata的momd文件等），你可以把(yourframework).framework 分发给你的用户就行了。如果还包含有资源，你必需分发(your framework).embeddedframework给你的用户。</p>
<p>为什么需要embedded framework？因为Xcode不会查找静态框架中的资源，如果你分发(your framework).framework, 则框架中的所有资源都不会显示，也不可用。</p>
<p>一个embedded framework只是一个framework之外的附加的包，包括了这个框架的所有资源的符号链接。这样做的目的是让Xcode能够找到这些资源。</p>
<p>使用iOS 框架</p>
<p>iOS框架和常规的Mac OS动态框架差不多，只是它是静态链接的而已。</p>
<p>在你的项目中使用一个框架，只需把它拖仅你的项目中。在包含头文件时，记住使用尖括号而不是双引号括住框架名称。例如，对于框架MyFramework：</p>
<p>#import &lt;MyFramework/MyClass.h&gt;</p>
<p>使用问题</p>
<p><code>Headers Not Found</code><br>如果Xcode找不到框架的头文件，你可能是忘记将它们声明为public了。参考“创建一个iOS框架项目”第5步。</p>
<p><code>No Such Product Type</code></p>
<p>如果你没有安装iOS Universal Framework在Xcode，并企图编译一个universal框架项目（对于“真”框架，不是“假”框架），这会导致下列错误：</p>
<p><code>target specifies product type &#39;com.apple.product-type.framework.static&#39;,but there&#39;s no such product type for the &#39;iphonesimulator&#39; platform</code></p>
<p>为了编译“真”iOS静态框架，Xcode需要做一些改动，因此为了编译“真”静态框架项目，请在所有的开发环境中安装它（对于使用框架的用户不需要，只有要编译框架才需要）。<br><code>The selected run destination is not valid for this action</code><br>有时，Xcode出错并加载了错误的active设置。首先，请尝试重启Xcode。如果错误继续存在，Xcode产生了一个坏的项目（因为Xcode4的一个bug，任何类型的项目都会出现这个问题）。如果是这样，你需要创建一个新项目重来一遍。</p>
<p>链接警告</p>
<p>第一次编译框架target时，Xcdoe会在链接阶段报告找不到文件夹：</p>
<p><code>ld: warning: directory not found for option&#39;-L/Users/myself/Library/Developer/Xcode/DerivedData/MyFramework-ccahfoccjqiognaqraesrxdyqcne/Build/Products/Debug-iphoneos&#39;</code></p>
<p>此时，可以clean并重新编译target，警告会消除。</p>
<p>Core Data momd not found</p>
<p>对于框架项目和应用程序项目，Xcode会以不同的方式编译momd（托管对象模型文件）。Xcode会简单地在根目录创建.mom文件，而不会创建一个.momd目录（目录中包含VersionInfo.plist和.mom文件）。</p>
<p>这意味着，当从一个embedded framework的model中实例化NSManagedObjectModel时，你必需使用.mom扩展名作为model的URL，而不是采用.momd扩展名。</p>
<p>NSURL *modelURL = [[NSBundle mainBundle]URLForResource:@”MyModel” withExtension:@”mom”];</p>
<p>Unknown class MyClass in Interface Builder file.</p>
<p>由于静态框架采用静态链接，linker会剔除所有它认为无用的代码。不幸的是，linker不会检查xib文件，因此如果类是在xib中引用，而没有在O-C代码中引用，linker将从最终的可执行文件中删除类。这是linker的问题，不是框架的问题（当你编译一个静态库时也会发生这个问题）。苹果内置框架不会发生这个问题，因为他们是运行时动态加载的，存在于iOS设备固件中的动态库是不可能被删除的。</p>
<p>有两个解决的办法：</p>
<pre><code>让框架的最终用户关闭linker的优化选项，通过在他们的项目的Other Linker Flags中添加-ObjC和-all_load。

在框架的另一个类中加一个该类的代码引用。例如，假设你有个MyTextField类，被linker剔除了。假设你还有一个MyViewController，它在xib中使用了MyTextField，MyViewController并没有被剔除。你应该这样做：</code></pre><p>在MyTextField中：</p>
<ul>
<li>(void)forceLinkerLoad_ {}</li>
</ul>
<p>在MyViewController中：</p>
<p>+(void) initialize {     [MyTextField forceLinkerLoad_]; }</p>
<p>他们仍然需要添加-ObjC到linker设置，但不需要强制all_load了。</p>
<p>第2种方法需要你多做一点工作，但却让最终用户避免在使用你的框架时关闭linker优化（关闭linker优化会导致object文件膨胀）。</p>
<p>unexpected file type ‘wrapper.cfbundle’ in Frameworks &amp;Libraries build phase</p>
<p>这个问题发生在把“假”框架项目作为workspace的依赖，或者把它当作子项目时（“真”框架项目没有这个问题）。尽管这种框架项目产生了正确的静态框架，但Xcode只能从项目文件中看出这是一个bundle，因此它在检查依赖性时发出一个警告，并在linker阶段跳过它。</p>
<p>你可以手动添加一个命令让linker在链接阶段能正确链接。在依赖你的静态框架的项目的OtherLinker Flags中加入：</p>
<p><code>-framework MyFramework</code><br>警告仍然存在, 但不会导致链接失败。</p>
<p><code>Libraries being linked or not being linked into the finalframework</code><br>很不幸， “真”框架和“假”框架模板在处理引入的静态库/框架的工作方式不同的。</p>
<p>“真”框架模板采用正常的静态库生成步骤，不会链接其他静态库/框架到最终生产物中。</p>
<p>“假”框架模板采用“欺骗”Xcode的手段，让它认为是在编译一个可重定位格式的目标文件，在链接阶段就如同编译一个可执行文件，把所有的静态代码文件链接到最终生成物中（尽管不会检查是否确实目标代码）。为了实现象“真”框架一样的效果，你可以只包含库/框架的头文件到你的项目中，而不需要包含库/框架本身。</p>
<p><code>Unrecognized selector in (some class with a category method)</code><br>如果你的静态库或静态框架包含了一个模块（只在类别代码中声明，没有类实现），linker会搞不清楚，并把代码从二进制文件中剔除。因为在最终生成的文件中没有这个方法，所以当调用这个类别中定义的方法时，会报一个“unrecognizedselector”异常。</p>
<p>要解决这个，在包含这个类别的模块代码中加一个“假的”类。linker发现存在完整的O-C类，会将类别代码链接到模块。</p>
<p>我写了一个头文件 LoadableCategory.h，以减轻这个工作量：</p>
<figure class="highlight plain"><figcaption><span>"SomeConcreteClass+MyAdditions.h"</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#import &quot;LoadableCategory.h&quot;  MAKE_CATEGORIES_LOADABLE(SomeConcreteClass_MyAdditions);   @implementation SomeConcreteClass(MyAdditions)</span><br><span class="line"></span><br><span class="line">  ... </span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<p>在使用这个框架时，仍然还需要在Build Setting的Other Linker Flags中加入-ObjC。</p>
<p>执行任何代码前单元测试崩溃</p>
<p>如果你在Xcode4.3中创建静态框架（或库）target时，勾选了“withunit tests”，当你试图运行单元测试时，它会崩溃：</p>
<p><code>Thread 1: EXC_BAD_ACCESS (code=2, address=0x0) 0 0x00000000 --- 15 dyldbootstrap:start(...)</code></p>
<p>这是lldb中的一个bug。你可以用GDB来运行单元测试。编辑scheme，选择Test，在Info标签中将调试器Debugger从LLDB改为GDB。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/09/2019/media/15641056083429/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/09/2019/media/15641056083429/" class="post-title-link" itemprop="url">ios 开发中 动态库 与静态库的区别</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2019-08-09 17:24:17 / Modified: 17:27:40" itemprop="dateCreated datePublished" datetime="2019-08-09T17:24:17+08:00">2019-08-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ios-开发中-动态库-与静态库的区别"><a href="#ios-开发中-动态库-与静态库的区别" class="headerlink" title="ios 开发中 动态库 与静态库的区别"></a>ios 开发中 动态库 与静态库的区别</h1><p>使用静态库的好处</p>
<ol>
<li>模块化，分工合作</li>
<li>避免少量改动经常导致大量的重复编译连接</li>
<li>也可以重用，注意不是共享使用</li>
</ol>
<p>动态库使用有如下好处：</p>
<ol>
<li>使用动态库，可以将最终可执行文件体积缩小</li>
<li>使用动态库，多个应用程序共享内存中得同一份库文件，节省资源</li>
<li>使用动态库，可以不重新编译连接可执行程序的前提下，更新动态库文件达到更新应用程序的目的。</li>
</ol>
<p>从1可以得出，将整个应用程序分模块，团队合作，进行分工，影响比较小。<br>等其他好处，<br>从2可以看出，其实动态库应该叫共享库，那么从这个意义上来说，苹果禁止iOS开发中使用动态库就可以理解了：</p>
<p>因为在现在的iPhone，iPodTouch，iPad上面程序都是单进程的，也就是某一时刻只有一个进程在运行，那么你写个共享库，</p>
<pre><code>----共享给谁？（你使用的时候只有你一个应用程序存在，其他的应该被挂起了，即便是可以同时多个进程运行，别人能使用你的共享库里的东西吗？你这个是给你自己的程序定制的。）
----目前苹果的AppStore不支持模块更新，无法更新某个单独文件(除非自己写一个更新机制：有自己的服务端放置最新动态库文件)</code></pre><p>至于苹果为啥禁止ios开发使用动态库我就猜到上面俩原因</p>
<p>深入理解iPhone静态库<br>    在实际的编程过程中，通常会把一些公用函数制成函数库，供其它程序使用，一则提搞了代码的复用；二则提搞了核心技术的保密程度。所以在实际的项目开发中，经常会使用到函数库，函数库分为静态库和动态库两种。和多数人所熟悉的动态语言和静态语言一样，这里的所谓静态和动态是相对编译期和运行期的：静态库在程序编译时会被链接到目标代码中，程序运行时将不再需要改静态库；而动态库在程序编译时并不会被链接到目标代码中，只是在程序运行时才被载入，因为在程序运行期间还需要动态库的存在。</p>
<p>　　iPhone官方只支持静态库联编。</p>
<p>深入理解framework（框架，其实相当于静态框架，不是动态库）</p>
<p>打包framework还是一个比较重要的功能，可以用来做一下事情：</p>
<p><em>（1）封装功能模块，比如有比较成熟的功能模块封装成一个包，然后以后自己或其他同事用起来比较方便。<br>（2）封装项目，有时候会遇到这个情况，就是一家公司找了两个开发公司做两个项目，然后要求他们的项目中的一个嵌套进另一个项目，此时也可以把呗嵌套的项目打包成framework放进去，这样比较方便。</em></p>
<p>我们为什么需要框架（Framework）？<br>要想用一种开发者友好的方式共享库是很麻烦的。你不仅仅需要包含库本身，还要加入所有的头文件，资源等等。</p>
<p>苹果解决这个问题的方式是框架（framework）。基本上，这是含有固定结构并包含了引用该库时所必需的所有东西的文件夹。不幸的是，iOS禁止所有的动态库。同时，苹果也从Xcode中移除了创建静态iOS框架的功能。</p>
<p>Xcode仍然可以支持创建框架的功能，重启这个功能，我们需要对Xcode做一些小小的改动。</p>
<p>把代码封装在静态框架是被app store所允许的。尽管形式不同，本质上它仍然是一种静态库。</p>
<p>框架（Framework）的类别</p>
<p>大部分框架都是动态链接库的形式。因为只有苹果才能在iOS设备上安装动态库，所以我们无法创建这种类型的框架。</p>
<p>静态链接库和动态库一样，只不过它是在编译时链接二进制代码，因此使用静态库不会有动态库那样的问题（即除了苹果谁也不能在iOS上使用动态库）。</p>
<p>“伪”框架是通过破解Xcode的目标Bundle（使用某些脚本）来实现的。它在表面上以及使用时跟静态框架并无区别。“伪”框架项目的功能几乎和真实的框架项目没有区别（不是全部）。</p>
<p>“嵌入”框架是静态框架的一个包装，以便Xcode能获取框架内的资源（图片、plist、nib等）。</p>
<p>本次发布包括了创建静态框架和“伪”框架的模板，以及二者的“嵌入”框架。</p>
<p>用哪一种模板？</p>
<p>本次发布有两个模板，每个模板都有“强”“弱”两个类别。你可以选择最适合一种（或者两种都安装上）。</p>
<p>最大的不同是Xcode不能创建“真”框架，除非你安装静态框架文件xcspec在Xcode中。这真是一个遗憾（这个文件是给项目使用的，而不是框架要用的）。</p>
<p>简单第</p>
<p>简单说，你可以这样决定用哪一种模板：</p>
<p>如果你不想修改Xcode，那么请使用“伪”框架版本</p>
<p>如果你只是想共享二进制（不是项目），两种都可以</p>
<p>如果你想把框架共享给不想修改Xcode的开发者，使用“伪”框架版本</p>
<p>如果你想把框架共享给修改过Xcode的开发者，使用“真”框架版本</p>
<p>如果你想把框架项目作为另一个项目的依赖（通过workspace或者子项目的方式），请使用“真”框架（或者“伪”框架，使用-framework——见后）</p>
<p>如果你想在你的框架项目中加入其他静态库／框架，并把它们也链接到最终结果以便不需要单独添加到用户项目中，使用“伪”框架</p>
<p>“伪”框架</p>
<p>“伪”框架是破解的“reloacatable object file”（可重定位格式的目标文件， 保存着代码和数据，适合于和其他的目标文件连接到一起，用来创建一个可执行目标文件或者是一个可共享目标文件），它可以让Xcode编译出类似框架的东西——其实也是一个bundle。</p>
<p>“伪框架”模板把整个过程分为几个步骤，用某些脚本去产生一个真正的静态框架（基于静态库而不是reloacatable object file）。而且，框架项目还是把它定义为wrapper.cfbundle类型，一种Xcode中的“二等公民”。</p>
<p>因此它跟“真”静态框架一样可以正常工作，但当存在依赖关系时就有麻烦了。</p>
<p>依赖问题</p>
<p>如果不使用依赖，只是创建普通的项目是没有任何问题的。但是如果使用了项目依赖（比如在workspace中），Xcode就悲剧了。当你点击“Link Binary With Libraries”下方的’+’按钮时，“伪框架”无法显示在列表中。你可以从你的“伪”框架项目的Products下面将它手动拖入，但当你编辑你的主项目时，会出现警告：</p>
<p>warning: skipping file ‘/somewhere/MyFramework.framework’ (unexpectedfile type ‘wrapper.cfbundle’ in Frameworks &amp; Libraries build phase)</p>
<p>并伴随“伪”框架中的链接错误。</p>
<p>幸运的是，有个办法来解决它。你可以在”Other Linker Flags”中用”-framwork”开关手动告诉linker去使用你的框架进行链接：</p>
<p>-framework MyFramework</p>
<p>警告仍然存在，但起码能正确链接了。</p>
<p>添加其他的库/框架</p>
<p>如果你加入其他静态（不是动态）库/框架到你的“伪”框架项目中，它们将“链接”进你最终的二进制框架文件中。在“真”框架项目中，它们是纯引用，而不是链接。</p>
<p>你可以在项目中仅仅包含头文件而不是静态库/框架本身的方式避免这种情况（以便编译通过）。</p>
<p>“真”框架</p>
<p>“真”框架各个方面都符合“真”的标准。它是真正的静态框架，正如使用苹果在从Xcode中去除的那个功能所创建的一样。</p>
<p>为了能创建真正的静态框架项目，你必需在Xcode中安装一个xcspec文件。</p>
<p>如果你发布一个“真”框架项目（而不是编译），希望去编译这个框架的人必需也安装xcspec文件（使用本次发布的安装脚本），以便Xcode能理解目标类型。</p>
<p>注意：如果你正在发布完全编译的框架，而不是框架项目，最终用户并不需要安装任何东西。</p>
<p>我已经提交一个报告给苹果，希望他们在Xcode中更新这个文件，但那需要一点时间.OpenRadarlink here</p>
<p>加其他静态库/框架</p>
<p>如果你加入其他静态（不是动态）库/框架到你的“真”框架项目，它们只会被引用，而不会象“伪”框架一样被链接到最终的二进制文件中。</p>
<p>从早期版本升级</p>
<p>如果你是从Mk6或者更早的版本升级，同时使用“真”静态框架，并且使用Xcode4.2.1以前的版本，请运行uninstall_legacy.sh以卸载早期用于Xcode的所有修正。然后再运行install.sh，重启Xcode。如果你使用Xcode4.3以后，只需要运行install.sh并重启Xcode。</p>
<p>安装</p>
<p>分别运行Real Framework目录或Fake Framework目录下的install.sh脚本进行安装（或者两个你都运行）。</p>
<p>重启Xcode，你将在新项目向导的Framework&amp;Library下看到StaticiOS Framework（或者Fake Static iOS Framework）。</p>
<p>卸载请运行unistall.sh脚本并重启Xcode。</p>
<p>创建一个iOS框架项目</p>
<p>创建新项目。</p>
<p>项目类型选择Framework&amp;Library下的Static iOS Framework（或者Fake Static iOS Framework）。</p>
<p>选择“包含单元测试”（可选的）。</p>
<p>在target中加入类、资源等。</p>
<p>凡是其他项目要使用的头文件，必需声明为public。进入target的Build Phases页，展开Copy Headers项，把需要public的头文件从Project或Private部分拖拽到Public部分。</p>
<p>编译你的 iOS 框架</p>
<p>选择指定target的scheme</p>
<p>修改scheme的Run配置（可选）。Run配置默认使用Debug，但在准备部署的时候你可能想使用Release。</p>
<p>编译框架（无论目标为iOS device和Simulator都会编译出相同的二进制，因此选谁都无所谓了）。</p>
<p>从Products下选中你的framework，“show in Finder”。</p>
<p>在build目录下有两个文件夹：(yourframework).framework and (your framework).embeddedframework.</p>
<p>如果你的框架只有代码，没有资源（比如图片、脚本、xib、coredata的momd文件等），你可以把(yourframework).framework 分发给你的用户就行了。如果还包含有资源，你必需分发(your framework).embeddedframework给你的用户。</p>
<p>为什么需要embedded framework？因为Xcode不会查找静态框架中的资源，如果你分发(your framework).framework, 则框架中的所有资源都不会显示，也不可用。</p>
<p>一个embedded framework只是一个framework之外的附加的包，包括了这个框架的所有资源的符号链接。这样做的目的是让Xcode能够找到这些资源。</p>
<p>使用iOS 框架</p>
<p>iOS框架和常规的Mac OS动态框架差不多，只是它是静态链接的而已。</p>
<p>在你的项目中使用一个框架，只需把它拖仅你的项目中。在包含头文件时，记住使用尖括号而不是双引号括住框架名称。例如，对于框架MyFramework：</p>
<p>#import &lt;MyFramework/MyClass.h&gt;</p>
<p>使用问题</p>
<p><code>Headers Not Found</code><br>如果Xcode找不到框架的头文件，你可能是忘记将它们声明为public了。参考“创建一个iOS框架项目”第5步。</p>
<p><code>No Such Product Type</code></p>
<p>如果你没有安装iOS Universal Framework在Xcode，并企图编译一个universal框架项目（对于“真”框架，不是“假”框架），这会导致下列错误：</p>
<p><code>target specifies product type &#39;com.apple.product-type.framework.static&#39;,but there&#39;s no such product type for the &#39;iphonesimulator&#39; platform</code></p>
<p>为了编译“真”iOS静态框架，Xcode需要做一些改动，因此为了编译“真”静态框架项目，请在所有的开发环境中安装它（对于使用框架的用户不需要，只有要编译框架才需要）。<br><code>The selected run destination is not valid for this action</code><br>有时，Xcode出错并加载了错误的active设置。首先，请尝试重启Xcode。如果错误继续存在，Xcode产生了一个坏的项目（因为Xcode4的一个bug，任何类型的项目都会出现这个问题）。如果是这样，你需要创建一个新项目重来一遍。</p>
<p>链接警告</p>
<p>第一次编译框架target时，Xcdoe会在链接阶段报告找不到文件夹：</p>
<p><code>ld: warning: directory not found for option&#39;-L/Users/myself/Library/Developer/Xcode/DerivedData/MyFramework-ccahfoccjqiognaqraesrxdyqcne/Build/Products/Debug-iphoneos&#39;</code></p>
<p>此时，可以clean并重新编译target，警告会消除。</p>
<p>Core Data momd not found</p>
<p>对于框架项目和应用程序项目，Xcode会以不同的方式编译momd（托管对象模型文件）。Xcode会简单地在根目录创建.mom文件，而不会创建一个.momd目录（目录中包含VersionInfo.plist和.mom文件）。</p>
<p>这意味着，当从一个embedded framework的model中实例化NSManagedObjectModel时，你必需使用.mom扩展名作为model的URL，而不是采用.momd扩展名。</p>
<p>NSURL *modelURL = [[NSBundle mainBundle]URLForResource:@”MyModel” withExtension:@”mom”];</p>
<p>Unknown class MyClass in Interface Builder file.</p>
<p>由于静态框架采用静态链接，linker会剔除所有它认为无用的代码。不幸的是，linker不会检查xib文件，因此如果类是在xib中引用，而没有在O-C代码中引用，linker将从最终的可执行文件中删除类。这是linker的问题，不是框架的问题（当你编译一个静态库时也会发生这个问题）。苹果内置框架不会发生这个问题，因为他们是运行时动态加载的，存在于iOS设备固件中的动态库是不可能被删除的。</p>
<p>有两个解决的办法：</p>
<pre><code>让框架的最终用户关闭linker的优化选项，通过在他们的项目的Other Linker Flags中添加-ObjC和-all_load。

在框架的另一个类中加一个该类的代码引用。例如，假设你有个MyTextField类，被linker剔除了。假设你还有一个MyViewController，它在xib中使用了MyTextField，MyViewController并没有被剔除。你应该这样做：</code></pre><p>在MyTextField中：</p>
<ul>
<li>(void)forceLinkerLoad_ {}</li>
</ul>
<p>在MyViewController中：</p>
<p>+(void) initialize {     [MyTextField forceLinkerLoad_]; }</p>
<p>他们仍然需要添加-ObjC到linker设置，但不需要强制all_load了。</p>
<p>第2种方法需要你多做一点工作，但却让最终用户避免在使用你的框架时关闭linker优化（关闭linker优化会导致object文件膨胀）。</p>
<p>unexpected file type ‘wrapper.cfbundle’ in Frameworks &amp;Libraries build phase</p>
<p>这个问题发生在把“假”框架项目作为workspace的依赖，或者把它当作子项目时（“真”框架项目没有这个问题）。尽管这种框架项目产生了正确的静态框架，但Xcode只能从项目文件中看出这是一个bundle，因此它在检查依赖性时发出一个警告，并在linker阶段跳过它。</p>
<p>你可以手动添加一个命令让linker在链接阶段能正确链接。在依赖你的静态框架的项目的OtherLinker Flags中加入：</p>
<p><code>-framework MyFramework</code><br>警告仍然存在, 但不会导致链接失败。</p>
<p><code>Libraries being linked or not being linked into the finalframework</code><br>很不幸， “真”框架和“假”框架模板在处理引入的静态库/框架的工作方式不同的。</p>
<p>“真”框架模板采用正常的静态库生成步骤，不会链接其他静态库/框架到最终生产物中。</p>
<p>“假”框架模板采用“欺骗”Xcode的手段，让它认为是在编译一个可重定位格式的目标文件，在链接阶段就如同编译一个可执行文件，把所有的静态代码文件链接到最终生成物中（尽管不会检查是否确实目标代码）。为了实现象“真”框架一样的效果，你可以只包含库/框架的头文件到你的项目中，而不需要包含库/框架本身。</p>
<p><code>Unrecognized selector in (some class with a category method)</code><br>如果你的静态库或静态框架包含了一个模块（只在类别代码中声明，没有类实现），linker会搞不清楚，并把代码从二进制文件中剔除。因为在最终生成的文件中没有这个方法，所以当调用这个类别中定义的方法时，会报一个“unrecognizedselector”异常。</p>
<p>要解决这个，在包含这个类别的模块代码中加一个“假的”类。linker发现存在完整的O-C类，会将类别代码链接到模块。</p>
<p>我写了一个头文件 LoadableCategory.h，以减轻这个工作量：</p>
<figure class="highlight plain"><figcaption><span>"SomeConcreteClass+MyAdditions.h"</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#import &quot;LoadableCategory.h&quot;  MAKE_CATEGORIES_LOADABLE(SomeConcreteClass_MyAdditions);   @implementation SomeConcreteClass(MyAdditions)</span><br><span class="line"></span><br><span class="line">  ... </span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<p>在使用这个框架时，仍然还需要在Build Setting的Other Linker Flags中加入-ObjC。</p>
<p>执行任何代码前单元测试崩溃</p>
<p>如果你在Xcode4.3中创建静态框架（或库）target时，勾选了“withunit tests”，当你试图运行单元测试时，它会崩溃：</p>
<p><code>Thread 1: EXC_BAD_ACCESS (code=2, address=0x0) 0 0x00000000 --- 15 dyldbootstrap:start(...)</code></p>
<p>这是lldb中的一个bug。你可以用GDB来运行单元测试。编辑scheme，选择Test，在Info标签中将调试器Debugger从LLDB改为GDB。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/01/2019/20190801/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/01/2019/20190801/" class="post-title-link" itemprop="url">iOS 组件化相关讨论文章汇总</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-01 00:00:00" itemprop="dateCreated datePublished" datetime="2019-08-01T00:00:00+08:00">2019-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-10 13:52:40" itemprop="dateModified" datetime="2019-08-10T13:52:40+08:00">2019-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>冰霜 · <a href="https://halfrost.com/ios_router/" target="_blank" rel="noopener">iOS 组件化 —— 路由设计思路分析</a></p>
<p>Limboy · <a href="https://limboy.me/tech/2016/03/10/mgj-components.html" target="_blank" rel="noopener">蘑菇街 App 的组件化之路</a></p>
<p>Limboy ·<a href="https://limboy.me/tech/2016/03/14/mgj-components-continued.html" target="_blank" rel="noopener"> 蘑菇街 App 的组件化之路·续</a></p>
<p>京东 · <a href="https://www.infoq.cn/article/jd-ios-component-management" target="_blank" rel="noopener">京东 iOS 客户端组件管理实践</a></p>
<p>Casa · <a href="https://casatwy.com/iOS-Modulization.html" target="_blank" rel="noopener">iOS 应用架构谈 组件化方案</a></p>
<p>MrPeak · <a href="https://mp.weixin.qq.com/s/zvT7YbP-ex8TeeCYuEis5Q" target="_blank" rel="noopener">iOS 组件化方案</a></p>
<p>bang · <a href="http://blog.cnbang.net/tech/3080/" target="_blank" rel="noopener">iOS 组件化方案探索</a></p>
<p>美团技术团队 · <a href="https://mp.weixin.qq.com/s/5ucpVa6ku4b9_pfMP9CqlQ" target="_blank" rel="noopener">Category 特性在 iOS 组件化中的应用与管控</a></p>
<p>iOS <a href="https://juejin.im/post/5ba3cc0df265da0aac6fdaa0" target="_blank" rel="noopener">从零到一搭建组件化项目框架</a></p>
<p>iOS 组件化：<a href="https://mp.weixin.qq.com/s/ir-agdSwM78R2ROxWVdPgQ" target="_blank" rel="noopener">Casa 和 小王 的对话</a></p>
<p>铜板街: <a href="https://juejin.im/post/5c55af09f265da2d8f470ede" target="_blank" rel="noopener">iOS组件化实践</a></p>
<p>Nix: <a href="https://nixwang.com/2017/05/06/ios-modulization/" target="_blank" rel="noopener">iOS组件化</a></p>
<p>微信: <a href="https://wereadteam.github.io/2016/03/19/iOS-Component/" target="_blank" rel="noopener">iOS 组件化方案探索</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/16/2018/20180315/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/16/2018/20180315/" class="post-title-link" itemprop="url">经典排序算法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-16 00:00:00" itemprop="dateCreated datePublished" datetime="2018-03-16T00:00:00+08:00">2018-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-10 11:46:14" itemprop="dateModified" datetime="2019-08-10T11:46:14+08:00">2019-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>##排序算法说明</p>
<ul>
<li><p>排序的定义:<br>对一序列对象根据某个关键字进行排序。</p>
</li>
<li><p>术语说明:<br>稳定：如果a原本在b前面，而a=b，排序之后a仍然在b的前面；<br>不稳定：如果a原本在b的前面，而a=b，排序之后a可能会出现在b的后面；<br>内排序：所有排序操作都在内存中完成；<br>外排序：由于数据太大，因此把数据放在磁盘中，而排序通过磁盘和内存的数据传输才能进行；<br>时间复杂度： 一个算法执行所耗费的时间。<br>空间复杂度：运行完一个程序所需内存的大小。</p>
</li>
<li><p>算法总结:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>排序算法</th>
<th>平均时间复杂度</th>
<th>空间复杂度</th>
<th>稳定性</th>
</tr>
</thead>
<tbody><tr>
<td>冒泡排序</td>
<td>O(n²)</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>选择排序</td>
<td>O(n²)</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
<tr>
<td>插入排序</td>
<td>O(n²)</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>希尔排序</td>
<td>O(n log n)</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
<tr>
<td>快速排序</td>
<td>O(n log n)</td>
<td>O(log n)</td>
<td>不稳定</td>
</tr>
<tr>
<td>堆排序</td>
<td>O(n log n)</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
<tr>
<td>计数排序</td>
<td>O(n+k)</td>
<td>O(k)</td>
<td>稳定</td>
</tr>
<tr>
<td>桶排序</td>
<td>O(n+k)</td>
<td>O(n+k)</td>
<td>稳定</td>
</tr>
</tbody></table>
<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">void BubbleSort(int a[], int n)&#123;</span><br><span class="line">    for (int i = 0; i &lt; n; i++)</span><br><span class="line">        for (int j = i+1; j &lt; n; j++)</span><br><span class="line">            if (a[j] &gt; a[i]) &#123;</span><br><span class="line">                int temp =a[i];</span><br><span class="line">                a[i] = a[j];</span><br><span class="line">                a[j] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">void QuikSort(int a[], int numsize)&#123;</span><br><span class="line">    int i=0,j=numsize-1;</span><br><span class="line">    int val=a[0];/*指定参考值val大小*/</span><br><span class="line">    if(numsize&gt;1)/*确保数组长度至少为2，递归出口，这里很重要*/</span><br><span class="line">    &#123;</span><br><span class="line">        while(i&lt;j)/*循环结束条件*/</span><br><span class="line">        &#123;</span><br><span class="line">            /*从后向前搜索比val小的元素，找到后填到a[i]中并跳出循环*/</span><br><span class="line">            for(;j&gt;i;j--)</span><br><span class="line">                if(a[j]&lt;val)&#123;</span><br><span class="line">                    a[i++]=a[j];</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            /*从前往后搜索比val大的元素，找到后填到a[j]中并跳出循环*/</span><br><span class="line">            for(;i&lt;j;i++)</span><br><span class="line">                if(a[i]&gt;val)</span><br><span class="line">                &#123;</span><br><span class="line">                    a[j--]=a[i];</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        a[i]=val;/*将保存在val中的数放到a[i]中*/</span><br><span class="line">        </span><br><span class="line">        QuikSort(a,i);/*递归，对前i个数排序*/</span><br><span class="line">        QuikSort(a+i+1,numsize-1-i);/*对i+1到numsize-1这numsize-1-i个数排序*/</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="直接插入排序"><a href="#直接插入排序" class="headerlink" title="直接插入排序"></a>直接插入排序</h2><h3 id="将还没参加排序的数字，跟已经排序好了得数组来逐个比较，刚好比某个数据大得时候，就插入"><a href="#将还没参加排序的数字，跟已经排序好了得数组来逐个比较，刚好比某个数据大得时候，就插入" class="headerlink" title="将还没参加排序的数字，跟已经排序好了得数组来逐个比较，刚好比某个数据大得时候，就插入"></a>将还没参加排序的数字，跟已经排序好了得数组来逐个比较，刚好比某个数据大得时候，就插入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">void InsertSort(int a[], int n)&#123;</span><br><span class="line">    int i,j;</span><br><span class="line">    //循环从第2个元素开始</span><br><span class="line">    for(i = 1; i &lt; n; i++)&#123;</span><br><span class="line">        if(a[i-1] &lt; a[i]) &#123;</span><br><span class="line">            // temp是待排序数组的第一个元素</span><br><span class="line">            int temp = a[i];</span><br><span class="line">            for(j=i-1; j&gt;=0 &amp;&amp; a[j]&lt;temp; j--)</span><br><span class="line">                a[j+1] =a [j];</span><br><span class="line">            // for循环里还要执行一次j--</span><br><span class="line">            a[j+1] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //    int i,j;</span><br><span class="line">    //    // x是待排序数组的第一个元素</span><br><span class="line">    //    int x;</span><br><span class="line">    //    for ( i = 1; i &lt; n; i++)</span><br><span class="line">    //    &#123;</span><br><span class="line">    //        x = a[i];</span><br><span class="line">    //        for (j = i - 1; j &gt;= 0; j--)</span><br><span class="line">    //            if (a[j] &gt; x)</span><br><span class="line">    //                a[j+1] = a[i];</span><br><span class="line">    //</span><br><span class="line">    //        // 如果已经排好序的数组，最大元素都比x小，就不需要排序</span><br><span class="line">    //            else</span><br><span class="line">    //                break;</span><br><span class="line">    //</span><br><span class="line">    //        a[j+1] = x;</span><br><span class="line">    //</span><br><span class="line">    //    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><p> d=5，对数据按照1、2、3、4、5来编号，分别比较编号相同的数据<br> 然后d=2，对数据按照1、2来编号<br>最后d=1，算完后就排好了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">void ShellSort(int a[], int n)&#123;</span><br><span class="line">    int i,j,d;</span><br><span class="line">    int x;</span><br><span class="line">    // 这个d的值是随便取的，不超过10就行了</span><br><span class="line">    d=n/2;</span><br><span class="line">    while(d&gt;=1)&#123;</span><br><span class="line">        for(i=d;i &lt; n;i++)&#123;</span><br><span class="line">            x=a[i];</span><br><span class="line">            for(j=i-d;j&gt;=0;j-=d)</span><br><span class="line">                if(a[j]&gt;x)</span><br><span class="line">                    a[j+d]=a[j];</span><br><span class="line">                else</span><br><span class="line">                    break;</span><br><span class="line">            a[j+d]=x;</span><br><span class="line">        &#125;</span><br><span class="line">        // 这里可以输出数组看看每次分组完后的结果</span><br><span class="line">        // 这里的数字控制d分成几组，如果是1得话，d为：5、2、1</span><br><span class="line">        d&gt;&gt;=1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="直接选择排序"><a href="#直接选择排序" class="headerlink" title="直接选择排序"></a>直接选择排序</h2><h3 id="跟冒泡排序的区别："><a href="#跟冒泡排序的区别：" class="headerlink" title="跟冒泡排序的区别："></a>跟冒泡排序的区别：</h3><p> 跟冒泡排序的联系：<br> 区别：<br> 最大值的交换方式不同，直接选择排序是记录最大值的下标，然后跟需要遍历的数组第一个数字<br> 交换，而冒泡排序是用需要遍历的数组的第一个数字跟后面的数字逐个比较，发现更大的数字就<br> 交换。<br> 相同点：<br> 都是两个for循环，两两逐一比较。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void SelectSort(int a[], int n)&#123;</span><br><span class="line">    for (int i = 0; i &lt; n; i++)&#123;</span><br><span class="line">        int k = i;  // k用来标记最大值的下标</span><br><span class="line">        for (int j = i+1; j &lt; n; j++)</span><br><span class="line">            if (a[j] &gt; a[k])</span><br><span class="line">                k = j;</span><br><span class="line">        // 最大值跟a[i]换位置，a[i]是遍历数组的第一个数</span><br><span class="line">        int temp =a[k];</span><br><span class="line">        a[k] = a[i];</span><br><span class="line">        a[i] = temp;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">void HeapSort(int array[],int length)&#123;</span><br><span class="line">    int tmp;</span><br><span class="line">    /*</span><br><span class="line">     调整序列的前半部分元素，调整完之后第一个元素是序列的最大的元素,</span><br><span class="line">     调整节点：3、2、1、0，这些都是有子节点的，调整后，以这些节点为根节点的二叉树，根节点都是最大的。</span><br><span class="line">     或者理解为：任何一个小二叉树都可以看做是一个大根堆。</span><br><span class="line">     */</span><br><span class="line">    //length/2-1是最后一个非叶节点</span><br><span class="line">    for(int i=length/2-1;i&gt;=0;--i)</span><br><span class="line">        HeapAdjust(array,i,length);</span><br><span class="line">    //从最后一个元素开始对序列进行调整，不断的缩小调整的范围直到第一个元素</span><br><span class="line">    for(int i = length-1;i&gt;0;--i)&#123;</span><br><span class="line">        //把第一个元素(当前最大元素)和当前的最后一个元素交换，</span><br><span class="line">        //保证当前的最后一个位置的元素都是在现在的这个序列之中最大的</span><br><span class="line">        ///Swap(&amp;array[0],&amp;array[i]);</span><br><span class="line">        tmp = array[i];</span><br><span class="line">        array[i]=array[0];</span><br><span class="line">        array[0]=tmp;</span><br><span class="line">        // 不断缩小调整heap的范围，每一次调整完毕保证第一个元素是当前序列的最大值</span><br><span class="line">        // 为什么这里调用一次就可以保证 a[0]最大呢？</span><br><span class="line">        // 因为之前的 for(int i=length/2-1;i&gt;=0;--i) 循环就保证了以每个节点为根节点的二叉树都是</span><br><span class="line">        // 大根堆，也即是说，a[1]或者 a[2]里面有一个值是当前需调整对象的最大值，所以调用一次就行了</span><br><span class="line">        HeapAdjust(array,0,i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//array是待调整的堆数组，i是待调整的数组元素的位置，nlength是数组的长度</span><br><span class="line">//本函数功能是：以i这个节点为根节点，构建大根堆，（即跟以i为父节点，跟i的最大子节点交换数值 ）</span><br><span class="line">void HeapAdjust(int array[],int i, int nLength)</span><br><span class="line">&#123;</span><br><span class="line">    int nChild;</span><br><span class="line">    int nTemp;</span><br><span class="line">    for(;2*i+1&lt;nLength;i=nChild)</span><br><span class="line">    &#123;</span><br><span class="line">        //子结点的位置=2*（父结点位置）+1</span><br><span class="line">        nChild=2*i+1;</span><br><span class="line">        //得到子结点中较大的结点</span><br><span class="line">        if(nChild&lt;nLength-1 &amp;&amp; array[nChild+1]&gt;array[nChild])</span><br><span class="line">            ++nChild;</span><br><span class="line">        //如果较大的子结点大于父结点那么把较大的子结点往上移动，替换它的父结点</span><br><span class="line">        if(array[i]&lt;array[nChild])&#123;</span><br><span class="line">            nTemp = array[i];</span><br><span class="line">            array[i] = array[nChild];</span><br><span class="line">            array[nChild] = nTemp;</span><br><span class="line">        &#125; else</span><br><span class="line">            //否则退出循环</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><h3 id="先拆，拆的同时两两排序，合并，两两合并"><a href="#先拆，拆的同时两两排序，合并，两两合并" class="headerlink" title="先拆，拆的同时两两排序，合并，两两合并"></a>先拆，拆的同时两两排序，合并，两两合并</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">void Merge(int a[],int b[],int s,int m,int e)&#123;</span><br><span class="line">    int i,j,k;</span><br><span class="line">    // m、e是不动的，j来记录数组b存到哪里了，s判断前半段，i判断后半段</span><br><span class="line">    for(i=m+1,j=s; s&lt;=m &amp;&amp; i&lt;=e; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        // printf(&quot;s:%d m:%d e:%d i:%d j:%d\n&quot;,s,m,e,i,j);</span><br><span class="line">        // 谁小就把谁放到数组b中，同时往后移动一位，</span><br><span class="line">        if(a[s] &lt;= a[i])</span><br><span class="line">            b[j]=a[s++];</span><br><span class="line">        else</span><br><span class="line">            b[j]=a[i++];</span><br><span class="line">    &#125;</span><br><span class="line">    // s这个时候没有超过m，而i超过了e，所以上面的循环结束了</span><br><span class="line">    if(s &lt;= m)&#123;</span><br><span class="line">        for(k = 0;k &lt;= m-s; k++)</span><br><span class="line">            b[j+k] = a[s+k];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // i这个时候没有超过e，而s超过了m，所以上面的循环结束了</span><br><span class="line">    if(i &lt;= e)&#123;</span><br><span class="line">        for( k=0 ; k&lt;= e-i; k++)</span><br><span class="line">            b[j+k] = a[i+k];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//内部使用递归，空间复杂度为n+logn</span><br><span class="line">void MergeSort(int a[],int b[],int s,int e)&#123;</span><br><span class="line">    int m, *temp;</span><br><span class="line">    // 一定要记住，递归要一个出口</span><br><span class="line">    if(s == e)&#123;</span><br><span class="line">        b[s] = a[s];</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        temp = (int*)malloc((e - s+1)*sizeof(int));</span><br><span class="line">        m = (s + e)/2;</span><br><span class="line">        MergeSort(a, temp, s, m);</span><br><span class="line">        MergeSort(a, temp, m+1, e);</span><br><span class="line">        // 查看递归过程，只看最后一个0、3、7的就可以了</span><br><span class="line">        // printf(&quot;s:%d m:%d e:%d \n&quot;,s,m,e);</span><br><span class="line">        Merge(temp, b, s, m, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<p>参考:<a href="https://blog.csdn.net/hellozhxy/article/details/79911867" target="_blank" rel="noopener">https://blog.csdn.net/hellozhxy/article/details/79911867</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/27/2017/20170427/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/27/2017/20170427/" class="post-title-link" itemprop="url">冒泡排序和插入排序详解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-27 00:00:00" itemprop="dateCreated datePublished" datetime="2017-04-27T00:00:00+08:00">2017-04-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-10 11:11:30" itemprop="dateModified" datetime="2019-08-10T11:11:30+08:00">2019-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p>设想如果待排序的序列是{2,1,3,4,5,6,7,8,9}，也就是说，2和1交换后就属于正常的排序结果了，但是之后的大量比较还是大大多余了。所以如果循环一次后如果没有数据交换，这就说明此序列已经有序，不需要再继续后面的循环判断工作了，为了实现这一想法，我们需要改进下代码，增加个BOOL变量flag来实现这一算法的改进。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (void)logArrayFunctionNice &#123;</span><br><span class="line">    int count  = 0;</span><br><span class="line">    int forcount  = 0;</span><br><span class="line">    BOOL flag = YES;</span><br><span class="line">    NSMutableArray * arr = @[@16,@1,@2,@9,@7,@12,@5,@3,@8,@13,@10].mutableCopy;</span><br><span class="line">    </span><br><span class="line">    for (int i = 0; i &lt; arr.count &amp;&amp; flag; i++) &#123;</span><br><span class="line">        forcount++;</span><br><span class="line">        flag = NO;</span><br><span class="line">        for (int j = (int)arr.count-2; j &gt; i; j--) &#123;</span><br><span class="line">            count++;</span><br><span class="line">            if (arr[j] &lt; arr[j+1]) &#123;</span><br><span class="line">                [arr exchangeObjectAtIndex:j withObjectAtIndex:j+1];</span><br><span class="line">                flag = YES;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        [self logArr:arr];</span><br><span class="line">    &#125;</span><br><span class="line">    NSLog(@&quot;循环次数：%d&quot;,forcount);</span><br><span class="line">    NSLog(@&quot;共%d次比较&quot;,count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>//打印</p>
<figure class="highlight plain"><figcaption><span>13 1 2 9 7 12 5 3 8 10</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">16 13 12 1 2 9 7 10 5 3 8</span><br><span class="line">16 13 12 10 1 2 9 7 8 5 3</span><br><span class="line">16 13 12 10 9 1 2 8 7 5 3</span><br><span class="line">16 13 12 10 9 8 1 2 7 5 3</span><br><span class="line">16 13 12 10 9 8 7 1 2 5 3</span><br><span class="line">16 13 12 10 9 8 7 5 1 2 3</span><br><span class="line">16 13 12 10 9 8 7 5 3 1 2</span><br><span class="line">16 13 12 10 9 8 7 5 3 2 1</span><br><span class="line">16 13 12 10 9 8 7 5 3 2 1</span><br></pre></td></tr></table></figure>
<p>循环次数：10<br>共45次比较</p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><p>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)logInsertionSortingArray &#123;</span><br><span class="line">    NSMutableArray * arr = @[@16,@1,@2,@9,@7,@12,@5,@3,@8,@13,@10].mutableCopy;</span><br><span class="line">    for (int i = 1; i &lt; arr.count; i++) &#123;</span><br><span class="line">        int j = i;  //* j是一个坑， 确定坑的位置，再把数从坑里取出来，注意顺序*/</span><br><span class="line">        id temp = arr[i];  //* temp 是从坑里取数*/</span><br><span class="line">        if (arr[i] &lt; arr[i-1]) &#123; / /* j &gt; 0 防止越界。写&amp;&amp;前面效率更高*/</span><br><span class="line">            temp = arr[i];</span><br><span class="line">            while (j &gt; 0 &amp;&amp; [temp intValue] &lt; [arr[j-1] intValue]) &#123;</span><br><span class="line">                arr[j] = arr[j-1];</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            arr[j] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="解释：从第二个开始，取出该位置的值为临时值temp，位置为j，此时j的位置为空，叫做坑，然后temp依次往前比较，直到找到比temp小，把temp插入该的位置，完成一次循环。"><a href="#解释：从第二个开始，取出该位置的值为临时值temp，位置为j，此时j的位置为空，叫做坑，然后temp依次往前比较，直到找到比temp小，把temp插入该的位置，完成一次循环。" class="headerlink" title="解释：从第二个开始，取出该位置的值为临时值temp，位置为j，此时j的位置为空，叫做坑，然后temp依次往前比较，直到找到比temp小，把temp插入该的位置，完成一次循环。"></a>解释：从第二个开始，取出该位置的值为临时值temp，位置为j，此时j的位置为空，叫做坑，然后temp依次往前比较，直到找到比temp小，把temp插入该的位置，完成一次循环。</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/16/2017/20170316/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2017/03/16/2017/20170316/" class="post-title-link" itemprop="url">Build input file double-conversion cannot be found</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-03-16 00:00:00" itemprop="dateCreated datePublished" datetime="2017-03-16T00:00:00+08:00">2017-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-10 09:23:30" itemprop="dateModified" datetime="2019-08-10T09:23:30+08:00">2019-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>#Xcode 10: 运行RN 工程 报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">❌  error: Build input file cannot be found: &apos;/Users/zqt/TGReactNative/node_modules/react-native/third-party/double-conversion-1.1.6/src/strtod.cc&apos;</span><br><span class="line">▸ Compiling fast-dtoa.cc</span><br><span class="line">❌  error: Build input file cannot be found: &apos;/Users/zqt/TGReactNative/node_modules/react-native/third-party/double-conversion-1.1.6/src/fast-dtoa.cc&apos;</span><br><span class="line">▸ Compiling fixed-dtoa.cc</span><br><span class="line">❌  error: Build input file cannot be found: &apos;/Users/zqt/TGReactNative/node_modules/react-native/third-party/double-conversion-1.1.6/src/fixed-dtoa.cc&apos;</span><br></pre></td></tr></table></figure>

<p>解决方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd node_modules/react-native/scripts &amp;&amp; ./ios-install-third-party.sh &amp;&amp; cd ../../../</span><br><span class="line">cd node_modules/react-native/third-party/glog-0.3.5/ &amp;&amp; ../../scripts/ios-configure-glog.sh &amp;&amp; cd ../../../../</span><br></pre></td></tr></table></figure>

<p>参考:<a href="">https://github.com/facebook/react-native/issues/21168</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/08/20/2016/20160820/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/08/20/2016/20160820/" class="post-title-link" itemprop="url">CalculateHeight</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-08-20 00:00:00" itemprop="dateCreated datePublished" datetime="2016-08-20T00:00:00+08:00">2016-08-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-09 18:22:02" itemprop="dateModified" datetime="2019-08-09T18:22:02+08:00">2019-08-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>CalculateHeight #计算富文本 动态高度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">+(CGFloat)getSpaceLabelHeight:(NSString*)str withWidth:(CGFloat)width &#123;</span><br><span class="line">NSMutableParagraphStyle *paraStyle = [[NSMutableParagraphStyle alloc] init];</span><br><span class="line">paraStyle.lineBreakMode = NSLineBreakByCharWrapping;</span><br><span class="line">paraStyle.alignment = NSTextAlignmentLeft;</span><br><span class="line">paraStyle.lineSpacing = 0;</span><br><span class="line">paraStyle.hyphenationFactor = 1.0;</span><br><span class="line">paraStyle.firstLineHeadIndent = 0.0;</span><br><span class="line">paraStyle.paragraphSpacingBefore = 0.0;</span><br><span class="line">paraStyle.headIndent = 0;</span><br><span class="line">paraStyle.tailIndent = 0;</span><br><span class="line">NSDictionary *dic = @&#123;NSFontAttributeName:[UIFont systemFontOfSize:14], NSParagraphStyleAttributeName:paraStyle, NSKernAttributeName:@1.0f</span><br><span class="line">                      &#125;;</span><br><span class="line"></span><br><span class="line">CGSize size = [str boundingRectWithSize:CGSizeMake(width, HEIGHT) options:NSStringDrawingUsesLineFragmentOrigin attributes:dic context:nil].size;</span><br><span class="line">return size.height;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/21/2016/20160721/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/07/21/2016/20160721/" class="post-title-link" itemprop="url">iOS应用程序中UITableView的性能优化(最全面)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-07-21 00:00:00" itemprop="dateCreated datePublished" datetime="2016-07-21T00:00:00+08:00">2016-07-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-09 18:00:54" itemprop="dateModified" datetime="2019-08-09T18:00:54+08:00">2019-08-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>由于iOS设备的限制，想处理好应用程序中的性能是一件难事。我们在开发过程中会有很多地方是需要注意的，当然也很容易在做出选择时忘记考虑性能影响。</p>
<p>对tableView的优化：<br>UITableView作为iOS开发中最重要的控件之一,为了获得更好的滑动性能,我们可以采取以下的措施:</p>
<p>·正确使用<code>reuseIdentifier</code>来重用cells</p>
<p>·尽量使所有的view opaque，包括cell自身</p>
<p>·如果cell内现实的内容来自web，使用异步加载，缓存请求结果</p>
<p>·避免渐变，图片缩放</p>
<p>·使用<code>shadowPath</code>来画阴影</p>
<p>·缓存行高</p>
<p>·减少subviews的数量</p>
<p>·尽量不适用<code>cellForRowAtIndexPath:</code>，如果你需要用到它，只用一次然后缓存结果</p>
<p>·使用正确的数据结构来存储数据</p>
<p>·尽量少于或者不用透明图层</p>
<p>以下是详细的介绍:</p>
<p>1、在应用程序中正确的地方使用：ReuseIdentifier</p>
<p>我们在开发中常见的错误就是没有给UITableViewCells，UICollectionViewCells，甚至是UITableViewHeaderFooterViews设置正确的reuseIdentifier。</p>
<p>在优化性能时，table view用<code>tableView:cellForRowAtIndexPath:</code>为rows分配cells的时候，它的数据应该重用自UITableViewCell。一个table view维持一个队列的数据可重用的UITableViewCell对象。当然如果不使用reuseIdentifier的话，每显示一行table view就需要设置全新的cell。这样一来对应用程序性能的影响非常的大，特别会使app的滚动体验大大的降低。</p>
<p>从iOS6起，除了对UICollectionView的cells和补充views，也应该在header和footer views中使用reuseIdentifiers，使用reuseIdentifiers的话，在一个table view中添加一个新的cell时在data source 方法中添加这个方法：</p>
<p>staticNSString*ID =@”MyCell”;</p>
<p>UITableViewCell*cell = [tableViewdequeueReusableCellWithIdentifier:ID];</p>
<p>这个方法可以把那些已经存在的cell从队列中排除，或者在必要时使用先前注册的nib或者class创造新的cell。如果没有可重用的cell，也没有注册一个class或者nib的话，这个方法就会返回nil。</p>
<p>2、在开发的过程中要尽量把Views设置为透明色：</p>
<p>如果应用中有透明的Views我们应该设置它们的opaque属性为YES。</p>
<p>其原因是这样会使系统用一个最优的方式渲染这些views。这个属性在IB或者代码里都可以设定。</p>
<p>Apple的文档对于为图片设置透明属性的描述是：</p>
<p>(opaque)这个属性给渲染系统提供了一个如何处理这个view的提示。如果设为YES，渲染系统就认为这个view是完全不透明的，这使得渲染系统优化一些渲染过程和提高性能。如果设置为NO，渲染系统正常地和其它内容组成这个View。默认值是YES。</p>
<p>在相对比较静止的画面中，设置这个属性不会有太大影响。然而当这个view嵌在scroll view里边，或者是一个复杂动画的一部分，不设置这个属性的话会在很大程度上影响app的性能。所以我们可以在模拟器中用Debug\Color Blended Layers选项来发现哪些view没有被设置为opaque。目标就是，能设为opaque的就全设为opaque!</p>
<p>3、在ImageView中调整图片的大小：</p>
<p>如果要在<code>UIImageView</code>中显示一个来自bundle的图片，你应保证图片的大小和UIImageView的大小相同。在运行中缩放图片是很耗费资源的，特别是<code>UIImageView</code>嵌套在<code>UIScrollView</code>中的情况下。</p>
<p>如果图片是从远端服务加载的你不能控制图片大小，比如在下载前调整到合适大小的话，你可以在下载完成后，最好是用background thread，缩放一次，然后在UIImageView中使用缩放后的图片。</p>
<p>4、选择正确的数据格式：</p>
<p>从app和网络服务间传输数据有很多方案，最常见的就是JSON和XML。如果让我们选择对app来说最合适的一个，那么解析JSON会比XML更快一些，JSON也通常更小更便于传输。从iOS5起就有了官方内建的JSON deserialization就更加方便使用了。</p>
<p>但是使用XML也有XML的好处，比如使用SAX来解析XML就像解析本地文件一样，我们不需像解析json一样等到整个文档下载完成才开始解析，那么当我们处理很大的数据的时候就会极大地减低内存消耗和增加性能。</p>
<p>XML的解析方式：</p>
<p>①DOM解析：是将文档一次性全部下载到本地在按节点进行解析，这样对我们的应用程序的内存消耗极大，手机本身的内存就不是很大，不像电脑那样有很大的内存，可见这种解析方式不太适用于手机，即手机无法直接使用 DOM 的方式来解析 XML；</p>
<p>②SAX解析：是一种只读的方式，在文档中按照节点从上之下的方式来进行解析，是苹果提供的解析方式，虽然节点是一次性读取的，但是节点中的内容是多次读取的，这种解析方式的速度相当的快，可以用NSXMLParser通过代理方法来实现解析；</p>
<p>SAX解析方式的步骤：</p>
<p>①开始文档—准备工作</p>
<p>②开始”节点”</p>
<p>③发现节点内部的内容，每一个节点，可能都需要多次解析才能完成</p>
<p>④结束”节点”</p>
<p>⑤结束文档—解析结束</p>
<p>以上步骤，②、③、④会不断循环，一直到所有的解析完成。</p>
<p>5、避免反复处理数据：</p>
<p>我们的应用需要从服务器加载所需的常用的JSON或者XML格式的数据。在服务器端和客户端使用相同的数据结构很重要。在内存中操作数据使它们满足我们的数据结构开销很大的。</p>
<p>譬如我们需要数据来展示一个table view,最好直接从服务器取array结构的数据以避免额外的中间数据结构改变。相似的，如果需要从特定key中取数据，那么就使用键值对的dictionary。</p>
<p>如果以上总结有欠缺的地方,请大神多多指教.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/27/2016/20160527/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="愚非愚余">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="愚非愚余">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2016/05/27/2016/20160527/" class="post-title-link" itemprop="url">iOS 编程 返回到指定页面的方法和理解</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-05-27 00:00:00" itemprop="dateCreated datePublished" datetime="2016-05-27T00:00:00+08:00">2016-05-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-09 17:43:34" itemprop="dateModified" datetime="2019-08-09T17:43:34+08:00">2019-08-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>关于ios中 viewcontroller的跳转问题，其中有一种方式是采用navigationController pushViewController 的方法，比如我从主页面跳转到了一级页面，又从一级页面跳转到了二级页面，然后从二级页面跳转到了三级页面，依次类推。，如果一级一级的返回我知道是没有问题的.</p>
<p>方法一:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UIViewController *viewCtl = self.navigationController.viewControllers[2];</span><br><span class="line">    [self.navigationController popToViewController:viewCtl animated:YES];</span><br></pre></td></tr></table></figure>

<p>你自己算 你是第几级界面  然后pop回去就可以了</p>
<p>方法二:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)backAction&#123;</span><br><span class="line">    UINavigationController *nav = self.navigationController;</span><br><span class="line">    NSMutableArray *viewControllers = [[NSMutableArray alloc] init];</span><br><span class="line">    for (UIViewController *vc in [nav viewControllers]) &#123;</span><br><span class="line">        [viewControllers addObject:vc];</span><br><span class="line">        if (vc isKindOfClass:[MyNeedJumpVC Class]) &#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    [nav setViewControllers:viewControllers animated:YES];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>​self.navigationController是当前的页面；</p>
<p><strong>MyNeedJumpVC</strong> 是我们需要跳转的页面；</p>
<p>UINavigationController导航控制器初始化 导航控制器栈的push和pop跳转理解</p>
<p>（1）导航控制器初始化的时候一般都有一个根视图控制器，导航控制器相当于一个栈，里面装的是视图控制器，最先进去的在最下面，最后进去的在最上面。在最上面的那个视图控制器的视图就是这个导航控制器对外展示的界面，也就是用户看到的界面。</p>
<p>（2）我们需要把导航控制器加载到APP中，需要把这个导航控制器设置为window的根视图控制器（都是控制器类，可以赋值），这样就相当于加载到了window里。</p>
<p>（3）我们要在栈中新增或者删除一个视图控制器，就需要得到导航控制器，一般在栈中得所有视图控制器都有一个self.navigationController，意思是我的导航控制器，也就是这个视图控制器所在的导航控制器，这样就拿到了导航控制器。</p>
<p>（4）栈中新增视图控制器用pushViewController，其实就是push进去一个，这样对于用户而言就是打开一个新界面了。</p>
<p>（5）栈中删除一个视图控制器用popViewControllerAnimated，当然这个pop只能pop最上面的那个，对于用户而言相当于从当前视图回到上一级视图。</p>
<p>（6）其实这个push和pop对于用户而言都是打开和跳转页面的一个操作。而pop由更多地操作方法，如一下子pop掉只剩下一个根视图控制器，那么就相当于从好几层直接回到最原始的主页面。也可以指定pop几个，以跳转到指定的页面。</p>
<p>（7）最重要的应该就是这个push和pop方法，而pop有很多种，这个理解后就不难记忆。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="愚非愚余"
    src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">愚非愚余</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">愚非愚余</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.2
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      element.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">

  

  


    </div>
</body>
</html>
